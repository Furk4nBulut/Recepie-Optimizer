{% extends 'base.html' %}

{% block title %}{{ recipe.name }}{% endblock %}

{% block content %}
<div class="container mt-5">
    <!-- Breadcrumb Navigation -->
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{% url 'index' %}">Home</a></li>
            <li class="breadcrumb-item active" aria-current="page">{{ recipe.name }}</li>
        </ol>
    </nav>

    <h1>{{ recipe.name }}</h1>
    <p>{{ recipe.description }}</p>

    <!-- Tarif adımları -->
    <h3>Recipe Steps</h3>
    <ul>
        {% for step_info in step_times %}
        <li>
            <strong>{{ step_info.step.name }}</strong> - {{ step_info.step.duration }} minutes
            <br>
            <em>Starts at minute {{ step_info.start_time }}, ends at minute {{ step_info.end_time }}</em>
            <br>
            Chef involvement:
            {% if step_info.step.occupies_chef %}
                Yes <i class="fas fa-utensils text-primary"></i>
            {% else %}
                No <i class="fas fa-clock text-secondary"></i>
            {% endif %}
            <br>
            {% if step_info.step.prerequisites.exists %}
            Prerequisites:
            {% for prerequisite in step_info.step.prerequisites.all %}
                {{ prerequisite.name }}{% if not forloop.last %}, {% endif %}
            {% endfor %}
            {% endif %}
        </li>
        {% endfor %}
    </ul>

    <!-- Adım ekleme butonu -->
    <a href="{% url 'add_recipe_step' recipe.id %}" class="btn btn-success mt-3">
        <i class="fas fa-plus"></i> Add Step
    </a>
</div>
{% endblock %}
